"use strict";(self.webpackChunkreact_practice=self.webpackChunkreact_practice||[]).push([[530],{530:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(791),c=s(184);const n=e=>{let{handleSearch:t}=e;const[s,n]=(0,a.useState)("");return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("form",{className:"d-flex mt-2",role:"search",onSubmit:e=>{e.preventDefault(),t(s)},children:[(0,c.jsx)("input",{className:"form-control me-2 ",type:"search",placeholder:"Search","aria-label":"Search",onChange:e=>{let{target:{value:t}}=e;n(t)},value:s}),(0,c.jsx)("button",{className:"btn btn-outline-success",type:"submit",children:"Search"})]})})},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("".concat("https://newsapi.org/v2","/everything?q=").concat(e,"&page=").concat(t,"&apiKey=").concat("4bd28e5d0fe14c08a7579befa12cb224"))},l=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:"card text-center bg-danger",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)("p",{className:"card-text",children:t})})})},i=()=>(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("div",{className:"spinner-border",role:"status",children:(0,c.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});var d=s(984);const o=e=>{let{news:t,onLoadMore:s}=e;return(0,c.jsxs)("ul",{children:[t.map((e=>(0,c.jsx)("li",{children:e.title},(0,d.x0)()))),(0,c.jsx)("button",{onClick:s,children:"Load more"})]})};var h=s(299);const u="idle",x="pending",j="rejected",m="resolved";let p=1;const v=e=>{let{searchText:t}=e;const{news:s,setNews:n}=(0,h.a)(),[d,v]=(0,a.useState)(""),[f,b]=(0,a.useState)(u);(0,a.useEffect)((()=>{s&&b(m)}),[s]),(0,a.useEffect)((()=>{t&&(b(x),setTimeout((()=>{r(t).then((e=>e.json())).then((e=>{if("ok"!==e.status)return Promise.reject(e.message);n(e.articles),b(m)})).catch((e=>{v(e),b(j)}))}),3e3))}),[t,n]);const g=e=>(e.preventDefault(),p+=1,r(t,p).then((e=>e.json())).then((e=>{n((()=>[...s,...e.articles])),b(m)})).catch((e=>{v(e),b(j)})));return f===x?(0,c.jsx)(i,{}):f===m?(0,c.jsx)(o,{news:s,onLoadMore:g}):f===j?(0,c.jsx)(l,{children:d}):void 0},f=()=>{const[e,t]=(0,a.useState)("");return(0,c.jsxs)("div",{children:[(0,c.jsx)(n,{handleSearch:e=>t(e)}),(0,c.jsx)(v,{searchText:e})]})}}}]);
//# sourceMappingURL=530.ef94f046.chunk.js.map